import { useEffect, useRef } from "react";
import { gsap } from "gsap";
import Lenis from "@studio-freight/lenis";

import { ScrollTrigger } from "gsap/ScrollTrigger";

export default function NavBar({ sectionRefs }) {
  const navBar = useRef(null);
  const logo = useRef(null);
  const cta = useRef(null);
  const tl = gsap.timeline();
  gsap.registerPlugin(ScrollTrigger);

  useEffect(() => {
    const lenis = new Lenis();
    function raf(time) {
      lenis.raf(time);
      requestAnimationFrame(raf);
    }
    requestAnimationFrame(raf);
  });

  useEffect(() => {
    tl.to(navBar.current, {
      y: 0,
      duration: 3,
      delay: 0.5,
      ease: "power4.inOut",
    });
  });


  useEffect(() => {
    sectionRefs.forEach((section) => {
      ScrollTrigger.create({
        trigger: section,
        start: "top 375px",
        end: "bottom 300px",
        // markers: true,
        animation: gsap
          .timeline()
          .to(navBar.current, { color: "#DDDDD5" })
          .to(cta.current, { backgroundColor: "#D1D1C7", color: "#0E0E0C" }, 0)
          .to(".bg-secondary-100", { backgroundColor: "#0E0E0C" }, 0),

        toggleActions: "restart reverse restart reverse",
      });
    });

  });

  return (
    <header
      ref={navBar}
      className="fixed top-0 z-50 flex w-full -translate-y-full items-center justify-between bg-secondary-100 px-5 py-3"
    >
      {/* logo */}
      <a href="#hero" aria-label="Logo" className="z-50">
        {/* <svg
          ref={logo}
          width="80"
          height="45"
          viewBox="0 0 121 45"
          fill="currentColor"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path d="M10.08 25.3774V36.6974H3.24V7.97739H10.08V17.4974C10.8533 16.6441 11.68 15.9774 12.56 15.4974C13.44 15.0174 14.56 14.7774 15.92 14.7774C18.0533 14.7774 19.7867 15.4707 21.12 16.8574C22.48 18.2441 23.16 20.2441 23.16 22.8574V36.6974H16.32V25.1374C16.32 23.7774 16.0667 22.7374 15.56 22.0174C15.08 21.2974 14.32 20.9374 13.28 20.9374C12.72 20.9374 12.1867 21.0841 11.68 21.3774C11.2 21.6707 10.8133 22.1374 10.52 22.7774C10.2267 23.4174 10.08 24.2841 10.08 25.3774ZM38.2188 27.4574V15.1774H45.0588V36.6974H38.7788V34.3774C38.1921 35.1774 37.3521 35.8307 36.2588 36.3374C35.1921 36.8441 34.0321 37.0974 32.7788 37.0974C31.3654 37.0974 30.0854 36.8041 28.9388 36.2174C27.7921 35.6041 26.8854 34.6841 26.2188 33.4574C25.5788 32.2041 25.2588 30.6307 25.2588 28.7374V15.1774H32.0988V27.4574C32.0988 28.6307 32.3654 29.5107 32.8988 30.0974C33.4588 30.6841 34.2188 30.9774 35.1788 30.9774C35.6321 30.9774 36.0854 30.8574 36.5388 30.6174C37.0188 30.3507 37.4188 29.9641 37.7388 29.4574C38.0588 28.9241 38.2188 28.2574 38.2188 27.4574ZM68.2013 15.1774L57.9613 44.4174H50.4813L53.4813 36.4574L45.0812 15.1774H52.5213L57.1613 28.4974L61.3213 15.1774H68.2013ZM75.0956 25.3774V36.6974H68.2556V15.1774H74.5356V17.7774C75.389 16.8441 76.3223 16.1107 77.3356 15.5774C78.3756 15.0441 79.5756 14.7774 80.9356 14.7774C83.069 14.7774 84.8023 15.4707 86.1356 16.8574C87.4956 18.2441 88.1756 20.2441 88.1756 22.8574V36.6974H81.3356V25.1374C81.3356 23.7774 81.0823 22.7374 80.5756 22.0174C80.0956 21.2974 79.3356 20.9374 78.2956 20.9374C77.7356 20.9374 77.2023 21.0841 76.6956 21.3774C76.2156 21.6707 75.829 22.1374 75.5356 22.7774C75.2423 23.4174 75.0956 24.2841 75.0956 25.3774ZM100.074 44.8174C98.101 44.8174 96.3544 44.4707 94.8344 43.7774C93.3144 43.1107 92.1144 42.1507 91.2344 40.8974C90.3544 39.6441 89.8744 38.1907 89.7944 36.5374H96.4344C96.5677 37.4974 96.9277 38.2307 97.5144 38.7374C98.1277 39.2441 98.9677 39.4974 100.034 39.4974C101.314 39.4974 102.274 39.1641 102.914 38.4974C103.581 37.8307 103.914 36.8441 103.914 35.5374V33.0174C103.354 33.8174 102.594 34.4441 101.634 34.8974C100.674 35.3507 99.6077 35.5774 98.4344 35.5774C96.701 35.5774 95.1277 35.1241 93.7144 34.2174C92.301 33.2841 91.181 32.0307 90.3544 30.4574C89.5277 28.8841 89.1144 27.1241 89.1144 25.1774C89.1144 23.1507 89.501 21.3641 90.2744 19.8174C91.0477 18.2441 92.1144 17.0174 93.4744 16.1374C94.8344 15.2307 96.3944 14.7774 98.1544 14.7774C99.5144 14.7774 100.701 14.9907 101.714 15.4174C102.728 15.8174 103.648 16.4707 104.474 17.3774V15.1774H110.754V35.4574C110.754 38.3641 109.794 40.6441 107.874 42.2974C105.981 43.9774 103.381 44.8174 100.074 44.8174ZM96.0344 25.2174C96.0344 26.5507 96.381 27.6174 97.0744 28.4174C97.7677 29.2174 98.6877 29.6174 99.8344 29.6174C100.634 29.6174 101.328 29.4307 101.914 29.0574C102.528 28.6841 102.994 28.1641 103.314 27.4974C103.661 26.8307 103.834 26.0574 103.834 25.1774C103.834 23.8441 103.461 22.7774 102.714 21.9774C101.994 21.1507 101.034 20.7374 99.8344 20.7374C98.6877 20.7374 97.7677 21.1507 97.0744 21.9774C96.381 22.7774 96.0344 23.8574 96.0344 25.2174Z" />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M113.5 1.5H111V6.50001H113.5C112.119 6.50001 111 7.61931 111 9.00001V11.5H116V9.00001C116 10.3807 117.119 11.5 118.5 11.5H121V6.50001H118.5C119.881 6.50001 121 5.38072 121 4V1.5H116V4C116 2.61929 114.881 1.5 113.5 1.5ZM116 6.50001H113.5C114.881 6.50001 116 7.61931 116 9.00001V6.50001ZM116 6.50001V4C116 5.38072 117.119 6.50001 118.5 6.50001H116Z"
          />
        </svg> */}
        <svg ref={logo} width="150" height="45" viewBox="0 0 388 148" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M54 57.4483L76.7143 39L90.0442 51.1456C99.077 59.3759 114.923 59.3758 123.956 51.1456L137.286 39L160 57.4483L146.107 67.0773C134.772 74.9333 134.772 89.1589 146.107 97.0149L160 106.644L137.286 125.092L124.278 112.712C115.21 104.082 98.7898 104.082 89.7217 112.712L76.7143 125.092L54 106.644L68.5678 96.5471C79.5484 88.9366 79.5484 75.1556 68.5678 67.5451L54 57.4483Z" />
<path fill-rule="evenodd" clip-rule="evenodd" d="M54 67.2874L76.7143 48.8391L90.0442 60.9847C99.077 69.215 114.923 69.215 123.956 60.9847L137.286 48.8391L160 67.2874L146.107 76.9164C134.772 84.7724 134.772 98.998 146.107 106.854L160 116.483L137.286 134.931L124.278 122.551C115.21 113.921 98.7898 113.921 89.7217 122.551L76.7143 134.931L54 116.483L68.5678 106.386C79.5484 98.7757 79.5484 84.9947 68.5678 77.3842L54 67.2874Z" fill="black"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M54 78.3562L76.7143 59.9079L90.0442 72.0534C99.077 80.2837 114.923 80.2837 123.956 72.0534L137.286 59.9079L160 78.3562L146.107 87.9851C134.772 95.8411 134.772 110.067 146.107 117.923L160 127.552L137.286 146L124.278 133.62C115.21 124.989 98.7898 124.989 89.7217 133.62L76.7143 146L54 127.552L68.5678 117.455C79.5484 109.844 79.5484 96.0634 68.5678 88.4529L54 78.3562Z" />
<path d="M182.088 101.632H213L213.256 103.296H181.704L182.088 101.632ZM189.32 135.424C189.32 135.595 189.256 135.744 189.128 135.872C189.043 135.957 188.893 136 188.68 136H164.104C163.891 136 163.72 135.957 163.592 135.872C163.464 135.744 163.4 135.595 163.4 135.424C163.4 135.211 163.507 135.061 163.72 134.976C163.891 134.891 164.061 134.827 164.232 134.784L165.512 134.336C167.304 133.696 169.16 132.331 171.08 130.24C173 128.149 174.515 125.184 175.624 121.344L193.672 57.792C194.355 55.36 194.419 53.4187 193.864 51.968C193.352 50.5173 192.52 49.3227 191.368 48.384C190.685 47.8293 190.173 47.5093 189.832 47.424C189.491 47.296 189.32 47.1467 189.32 46.976C189.32 46.72 189.384 46.5707 189.512 46.528C189.64 46.4427 189.853 46.4 190.152 46.4H224.456C224.755 46.4 224.968 46.4427 225.096 46.528C225.224 46.5707 225.288 46.72 225.288 46.976C225.288 47.1467 225.139 47.3173 224.84 47.488C224.541 47.6587 224.008 47.9147 223.24 48.256C222.685 48.512 222.301 48.9173 222.088 49.472C221.917 49.984 222.045 50.944 222.472 52.352L247.112 131.264C247.411 132.16 247.816 132.885 248.328 133.44C248.883 133.995 249.501 134.379 250.184 134.592C250.568 134.72 250.845 134.848 251.016 134.976C251.187 135.061 251.272 135.211 251.272 135.424C251.272 135.595 251.187 135.744 251.016 135.872C250.888 135.957 250.696 136 250.44 136H213.704C213.448 136 213.256 135.957 213.128 135.872C213 135.744 212.936 135.595 212.936 135.424C212.936 135.211 213 135.083 213.128 135.04C213.299 134.997 213.576 134.912 213.96 134.784L216.136 134.144C217.373 133.76 218.099 133.291 218.312 132.736C218.525 132.139 218.44 131.2 218.056 129.92L195.144 56.768L197.192 51.328L177.224 121.728C176.627 123.819 176.691 125.696 177.416 127.36C178.184 128.981 179.421 130.389 181.128 131.584C182.877 132.736 184.925 133.675 187.272 134.4L188.552 134.784C188.851 134.869 189.043 134.955 189.128 135.04C189.256 135.125 189.32 135.253 189.32 135.424Z" />
<path d="M275.552 63.432V132.552L260.48 135.576C260.128 135.672 259.808 135.752 259.52 135.816C259.264 135.88 259.04 135.912 258.848 135.912C258.592 135.912 258.384 135.832 258.224 135.672C258.064 135.544 257.984 135.368 257.984 135.144V69.96C257.984 69.64 257.904 69.416 257.744 69.288C257.616 69.128 257.392 69.048 257.072 69.048L255.296 69C255.04 69 254.864 68.952 254.768 68.856C254.672 68.76 254.624 68.632 254.624 68.472C254.624 68.28 254.672 68.152 254.768 68.088C254.896 67.992 255.056 67.912 255.248 67.848L272.96 62.856C273.44 62.728 273.776 62.648 273.968 62.616C274.16 62.552 274.368 62.52 274.592 62.52C274.912 62.52 275.152 62.616 275.312 62.808C275.472 62.968 275.552 63.176 275.552 63.432ZM274.304 99.672L273.392 98.616C275.248 95.992 277.264 94.04 279.44 92.76C281.648 91.448 284.208 90.792 287.12 90.792C290.832 90.792 294.064 91.624 296.816 93.288C299.568 94.952 301.696 97.352 303.2 100.488C304.704 103.624 305.456 107.432 305.456 111.912C305.456 116.712 304.56 120.936 302.768 124.584C300.976 128.2 298.496 131.016 295.328 133.032C292.16 135.016 288.512 136.008 284.384 136.008C281.376 136.008 279.008 135.544 277.28 134.616C275.552 133.656 274.128 132.168 273.008 130.152L274.544 129.384C275.12 130.76 275.84 131.784 276.704 132.456C277.568 133.096 278.64 133.416 279.92 133.416C281.456 133.416 282.8 132.872 283.952 131.784C285.104 130.664 286 128.648 286.64 125.736C287.28 122.824 287.6 118.696 287.6 113.352C287.6 108.648 287.328 104.936 286.784 102.216C286.272 99.464 285.536 97.512 284.576 96.36C283.648 95.176 282.544 94.584 281.264 94.584C279.952 94.584 278.704 95 277.52 95.832C276.336 96.664 275.264 97.944 274.304 99.672ZM329.668 63.432V131.496C329.668 132.04 329.748 132.472 329.908 132.792C330.1 133.112 330.404 133.32 330.82 133.416L332.596 133.848C333.044 133.976 333.268 134.168 333.268 134.424C333.268 134.808 333.028 135 332.548 135H309.172C308.98 135 308.82 134.952 308.692 134.856C308.564 134.76 308.5 134.632 308.5 134.472C308.5 134.344 308.548 134.232 308.644 134.136C308.74 134.008 308.916 133.912 309.172 133.848L310.948 133.416C311.396 133.32 311.7 133.112 311.86 132.792C312.02 132.472 312.1 132.04 312.1 131.496V69.96C312.1 69.64 312.036 69.416 311.908 69.288C311.78 69.128 311.556 69.048 311.236 69.048L309.412 69C309.156 69 308.98 68.952 308.884 68.856C308.788 68.76 308.74 68.632 308.74 68.472C308.74 68.28 308.804 68.152 308.932 68.088C309.06 67.992 309.22 67.912 309.412 67.848L327.124 62.856C327.572 62.728 327.892 62.648 328.084 62.616C328.308 62.552 328.532 62.52 328.756 62.52C329.076 62.52 329.3 62.616 329.428 62.808C329.588 62.968 329.668 63.176 329.668 63.432ZM328.228 102.456L327.412 101.592L329.284 99.96C332.74 96.92 335.812 94.632 338.5 93.096C341.188 91.56 343.588 90.792 345.7 90.792C348.644 90.792 350.932 91.64 352.564 93.336C354.196 95.032 355.204 97.72 355.588 101.4L358.756 131.496C358.82 132.04 358.916 132.472 359.044 132.792C359.204 133.112 359.492 133.32 359.908 133.416L361.684 133.848C361.94 133.912 362.116 134.008 362.212 134.136C362.308 134.232 362.356 134.344 362.356 134.472C362.356 134.632 362.292 134.76 362.164 134.856C362.068 134.952 361.908 135 361.684 135H337.876C337.428 135 337.204 134.808 337.204 134.424C337.204 134.168 337.428 133.976 337.876 133.848L339.604 133.416C340.052 133.32 340.372 133.112 340.564 132.792C340.788 132.472 340.868 132.04 340.804 131.496L338.308 103.272C338.148 101.672 337.796 100.504 337.252 99.768C336.74 99.032 335.892 98.664 334.708 98.664C333.908 98.664 333.124 98.872 332.356 99.288C331.588 99.672 330.82 100.2 330.052 100.872L328.228 102.456ZM384.137 91.512V131.496C384.137 132.04 384.217 132.472 384.377 132.792C384.569 133.112 384.873 133.32 385.289 133.416L387.065 133.848C387.321 133.912 387.497 134.008 387.593 134.136C387.689 134.232 387.737 134.344 387.737 134.472C387.737 134.632 387.673 134.76 387.545 134.856C387.449 134.952 387.289 135 387.065 135H363.641C363.449 135 363.289 134.952 363.161 134.856C363.033 134.76 362.969 134.632 362.969 134.472C362.969 134.344 363.017 134.232 363.113 134.136C363.209 134.008 363.385 133.912 363.641 133.848L365.417 133.416C365.865 133.32 366.169 133.112 366.329 132.792C366.489 132.472 366.569 132.04 366.569 131.496V98.04C366.569 97.752 366.505 97.528 366.377 97.368C366.249 97.208 366.025 97.128 365.705 97.128H363.881C363.625 97.096 363.449 97.032 363.353 96.936C363.257 96.84 363.209 96.712 363.209 96.552C363.209 96.392 363.273 96.264 363.401 96.168C363.529 96.072 363.689 95.992 363.881 95.928L381.593 90.936C382.041 90.808 382.361 90.728 382.553 90.696C382.777 90.632 383.001 90.6 383.225 90.6C383.545 90.6 383.769 90.696 383.897 90.888C384.057 91.048 384.137 91.256 384.137 91.512ZM375.113 87.768C372.169 87.768 369.769 86.856 367.913 85.032C366.089 83.176 365.177 80.904 365.177 78.216C365.177 75.496 366.089 73.224 367.913 71.4C369.769 69.544 372.169 68.616 375.113 68.616C378.089 68.616 380.521 69.544 382.409 71.4C384.297 73.224 385.241 75.496 385.241 78.216C385.241 80.904 384.297 83.176 382.409 85.032C380.521 86.856 378.089 87.768 375.113 87.768Z" />
</svg>

      </a>
      <nav className=" space-x-7 font-grotesk text-body-3 sm:block">
        <a href="#about" className="group relative hidden md:inline-block">
          <span>about</span>
          <span className="absolute bottom-0 left-0 h-[0.125em] w-0 rounded-full bg-secondary-600 duration-300 ease-in-out group-hover:w-full"></span>
        </a>
        <a href="#services" className="group relative hidden md:inline-block">
          <span>experience</span>
          <span className="absolute bottom-0 left-0 h-[0.125em] w-0 rounded-full bg-secondary-600 duration-300 ease-in-out group-hover:w-full"></span>
        </a>
        <a href="#works" className="group relative hidden md:inline-block">
          <span>projects</span>
          <span className="absolute bottom-0 left-0 h-[0.125em] w-0 rounded-full bg-secondary-600 duration-300 ease-in-out group-hover:w-full"></span>
        </a>
        <a
          ref={cta}
          className="button group relative hover:bg-transparent"
          href="#contact"
        >
          <span className="relative w-fit">
            <span className="absolute bottom-2 h-[0.15em] w-0 bg-secondary-700 opacity-90 duration-300 ease-out group-hover:w-full"></span>
            <span>Let&apos;s Talk.</span>
          </span>
        </a>
      </nav>
    </header>
  );
}
